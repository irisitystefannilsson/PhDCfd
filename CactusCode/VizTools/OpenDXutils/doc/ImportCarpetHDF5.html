<HTML>
<HEAD>
  <TITLE>User's Reference - ImportCarpetHDF5</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFFF">
<H3>ImportCarpetHDF5</H3>
<P><STRONG>Category</STRONG><P>
Import and Export

<P><STRONG>Function</STRONG><P>
Imports time-dependent fixed mesh refinement data from a Carpet HDF5 file

<P><STRONG>Syntax</STRONG>
<PRE>
<STRONG>result, max_timestep</STRONG> = ImportCarpetHDF5 (<STRONG>filename, origin, thickness, stride, levels, index, reopen, single_precision</STRONG>);
</PRE>

<P><STRONG>Inputs</STRONG>
<BR>
<TABLE BORDER>
<TR>
<TH ALIGN="LEFT" VALIGN="TOP" WIDTH="20%">Name
</TH><TH ALIGN="LEFT" VALIGN="TOP" WIDTH="20%">Type
</TH><TH ALIGN="LEFT" VALIGN="TOP" WIDTH="10%">Default
</TH><TH ALIGN="LEFT" VALIGN="TOP" WIDTH="50%">Description
</TH></TR><TR>
<TD ALIGN="LEFT" VALIGN="TOP" WIDTH="20%"><TT><STRONG>filename</STRONG></TT>
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="20%">string
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="10%">(none)
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="50%">filename or URL of the Carpet HDF5 file to import data from
</TD></TR><TR>
<TD ALIGN="LEFT" VALIGN="TOP" WIDTH="20%"><TT><STRONG>origin</STRONG></TT>
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="20%">integer list or vector
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="10%">NULL
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="50%">lower-left corner grid point of the slab to read
</TD></TR><TR>
<TD ALIGN="LEFT" VALIGN="TOP" WIDTH="20%"><TT><STRONG>thickness</STRONG></TT>
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="20%">integer list or vector
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="10%">NULL
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="50%">thickness in grid points of the slab to read
</TD></TR><TR>
<TD ALIGN="LEFT" VALIGN="TOP" WIDTH="20%"><TT><STRONG>stride</STRONG></TT>
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="20%">integer list or vector
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="10%">NULL
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="50%">include every &lt;stride&gt;-th grid point in the slab to read
</TD></TR><TR>
<TD ALIGN="LEFT" VALIGN="TOP" WIDTH="20%"><TT><STRONG>levels</STRONG></TT>
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="20%">integer list or vector
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="10%">NULL
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="50%">refinement levels to include in the imported timestep (starting with 0
for the coarsest level)
</TD></TR><TR>
<TD ALIGN="LEFT" VALIGN="TOP" WIDTH="20%"><TT><STRONG>timestep</STRONG></TT>
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="20%">integer
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="10%">0
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="50%">timestep to import
</TD></TR><TR>
<TD ALIGN="LEFT" VALIGN="TOP" WIDTH="20%"><TT><STRONG>reopen</STRONG></TT>
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="20%">flag
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="10%">0
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="50%">reopen file on each execution
</TD></TR><TR>
<TD ALIGN="LEFT" VALIGN="TOP" WIDTH="20%"><TT><STRONG>single_precision</STRONG></TT>
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="20%">flag
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="10%">1
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="50%">import double precision floating-point datasets as single precision
</TD></TR>
<TD ALIGN="LEFT" VALIGN="TOP" WIDTH="20%"><TT><STRONG>user</STRONG></TT>
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="20%">string
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="20%">(none)
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="40%">user name for standard Ftp authentification during remote file access
</TD></TR>
<TD ALIGN="LEFT" VALIGN="TOP" WIDTH="20%"><TT><STRONG>password</STRONG></TT>
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="20%">string
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="20%">(none)
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="40%">password for standard Ftp authentification during remote file access
</TD></TR>
<TD ALIGN="LEFT" VALIGN="TOP" WIDTH="20%"><TT><STRONG>subject</STRONG></TT>
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="20%">string
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="20%">(none)
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="40%">subject name for GSI authentification during remote file access
</TD></TR>
<TD ALIGN="LEFT" VALIGN="TOP" WIDTH="20%"><TT><STRONG>num_streams</STRONG></TT>
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="20%">integer
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="20%">1
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="40%">number of parallel streams to use during remote file access
</TD></TR><TR>
<TD ALIGN="LEFT" VALIGN="TOP" WIDTH="20%"><TT><STRONG>varnames</STRONG></TT>
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="20%">string
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="10%">(none)
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="50%">variable names to import
</TD></TR>
<TD ALIGN="LEFT" VALIGN="TOP" WIDTH="20%"><TT><STRONG>invalidate_fine_grid</STRONG></TT>
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="20%">flag
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="20%">1
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="40%">shall we invalidate points on finer levels? (if true, this will not show the TRUE gridstructure of finer reflevels, but will avoid overlaps)
</TD></TR>
</TABLE>

<P><STRONG>Outputs</STRONG>
<BR>
<TABLE BORDER>
<TR>
<TH ALIGN="LEFT" VALIGN="TOP" WIDTH="25%">Name
</TH><TH ALIGN="LEFT" VALIGN="TOP" WIDTH="25%">Type
</TH><TH ALIGN="LEFT" VALIGN="TOP" WIDTH="50%">Description
</TH></TR><TR>
<TD ALIGN="LEFT" VALIGN="TOP" WIDTH="25%"><TT><STRONG>result</STRONG></TT>
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="25%">group
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="50%">the imported timestep
</TD></TR><TR>
<TD ALIGN="LEFT" VALIGN="TOP" WIDTH="25%"><TT><STRONG>bboxes</STRONG></TT>
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="25%">group
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="50%">bounding boxes of all active levels of the imported timestep
</TD></TR><TR>
<TD ALIGN="LEFT" VALIGN="TOP" WIDTH="25%"><TT><STRONG>max_timestep</STRONG></TT>
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="25%">integer
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="50%">largest possible timestep (total number of timesteps in the HDF5 file, minus 1)
</TD></TR>
</TABLE>

<P><STRONG>Functional Details</STRONG><P>
The ImportCarpetHDF5 module provides the same basic functionality as the
ImportHDF5 module. Please refer to the <a href=ImportHDF5.html>user's reference
of ImportHDF5</a> for a full description about the corresponding functional
details.
<P>

ImportCarpetHDF5 is able to read time-dependent fixed mesh refinement
datasets from an HDF5 file written in the FlexIO AMR writer file format as
used by the Carpet's IOHDF5 output method.<BR>
Each dataset in the data file represents a regular-shaped patch; all patches
of the same timestep but with potentially different refinement levels are
grouped together in a single grid. The ImportCarpetHDF5 module imports one
timestep at a time as a multigrid group, with the individual patches as field
members of that group.
<P>
When a data file has been opened successfully, ImportCarpetHDF5 will print in
the message window the number of available timesteps as well as the total
number of patches found in the file. It will also print the dimensions of the
underlying grid (with respect to the finest refinement level over all patches
in the datafile).
All subsequent hyperslab selections (specified via the <STRONG>origin,
thickness, stride</STRONG> parameters) will be based on those grid dimensions.
<BR>
By default ImportCarpetHDF5 will include the patches of all refinement levels
in the imported timestep. Patches of individual refinement levels may be
selected by setting the <STRONG>levels</STRONG> parameter accordingly
(with 0 denoting the coarsest level, 1 the second-coarsest, etc.).
If the data file contains datasets from multiple variables (as happens when
<CODE>IOHDF5::out_one_file_per_group</CODE> was set), individual variables
can be selected by the <STRONG>varnames</STRONG> parameter which can also
be given as a POSIX extended regular expression.
<P>
For each pair of nested patches or patches of the same refinement level, 
the overlapping positions in both patches as well as their corresponding connections 
will be marked invalid so that they are not processed or rendered by subsequent modules. 
However, this will not render the true gridstructure when the "ShowConnections" 
function is used. To force the display of the true gridstructure, set the option 
"invalidate_fine_grid = 0". 
<P>
The single bounding box that can be extracted from the <STRONG>result</STRONG>
output (using the ShowBox module) will cover all patches included in the
imported timestep. The patches' individual bounding boxes can be taken
directly from the <STRONG>bboxes</STRONG> output. Displaying both outputs in
the same image is especially useful to locate 2-dimensional slabs within a 3D
mesh-refined volume. 


<P><STRONG>See Also</STRONG>
<P>Import, Slab, <a href=ImportHDF5.html>ImportHDF5</a>


<P><STRONG>Example Visual Programs</STRONG>
<P><PRE>CarpetSlabViz.net</PRE><P>

The example program is contained in the <TT>net/</TT> subdirectory of the
OpenDXutils package. Please make sure that you change into this directory
before running the program because it uses a Carpet HDF5 sample data file
located relative to that directory.



<P><STRONG>Further Documentation</STRONG>
<P>
The ImportCarpetHDF5 data import module is provided by the OpenDXutils package.
More information about this package can be found on the
<A href=http://www.cactuscode.org/VizTools/OpenDX.html>Cactus Code visualization page for OpenDX</A>.
<br>
The FlexIO AMR Writer file format is described in detail
<a href="http://zeus.ncsa.uiuc.edu/~jshalf/FlexIO/AMRwriter.html">here</a>.
<br>More information on Carpet can be obtained on the <a href="http://www.carpetcode.org">Carpet home page</a>.

<PRE>Last modified: $Header: /cactus/VizTools/OpenDXutils/doc/ImportCarpetHDF5.html,v 1.6 2007/05/23 11:13:00 tradke Exp $</PRE>
</BODY>
</HTML>
